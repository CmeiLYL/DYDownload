# 抖音下载器 Web UI

这是一个为抖音下载器项目开发的现代化Web界面，提供了直观易用的图形化操作界面。

## 功能特性

### 🏠 首页
- **链接管理**: 添加、编辑、删除抖音链接
- **下载选项**: 配置音乐、封面、头像、数据保存等选项
- **下载模式**: 选择发布作品、喜欢作品、合集等下载模式
- **实时控制**: 开始/停止下载，实时进度显示
- **快速统计**: 显示链接数量和已下载文件数量

### ⚙️ 设置页面
- **基本设置**: 配置下载路径、文件夹样式、数据库等
- **增量下载**: 设置各种类型的增量下载选项
- **Cookie配置**: 配置抖音登录Cookie信息
- **配置管理**: 保存、重新加载、重置配置

### 📁 文件页面
- **文件列表**: 查看已下载的文件
- **文件信息**: 显示文件名、路径、大小、修改时间
- **实时刷新**: 手动刷新文件列表

### 📋 日志页面
- **系统日志**: 查看下载过程的详细日志
- **实时更新**: 自动滚动到最新日志
- **手动刷新**: 手动刷新日志内容

## 安装和运行

### 1. 安装依赖

```bash
pip install -r requirements.txt
```

### 2. 启动Web界面

#### 方法一：使用启动脚本（推荐）
```bash
python run_web.py
```

#### 方法二：直接运行Flask应用
```bash
python app.py
```

### 3. 访问界面

启动后，浏览器会自动打开 `http://localhost:5000`

如果没有自动打开，请手动在浏览器中访问该地址。

## 使用说明

### 首次使用

1. **配置Cookie**（可选）
   - 在设置页面中配置抖音登录Cookie
   - 这可以提高下载成功率

2. **添加下载链接**
   - 在首页点击"添加链接"
   - 输入抖音用户主页或视频链接
   - 支持多个链接同时下载

3. **配置下载选项**
   - 选择需要下载的内容类型
   - 设置下载模式和线程数

4. **开始下载**
   - 点击"开始下载"按钮
   - 实时查看下载进度和状态

### 配置说明

#### 下载选项
- **下载音乐**: 是否下载视频中的音乐文件
- **下载封面**: 是否下载视频封面图片
- **下载头像**: 是否下载用户头像
- **保存数据**: 是否保存获取到的JSON数据

#### 下载模式
- **发布作品**: 下载用户发布的所有作品
- **喜欢作品**: 下载用户喜欢的作品
- **合集**: 下载用户的合集内容

#### 增量下载
- 启用后只下载新增的内容
- 需要配合数据库功能使用
- 可以节省时间和流量

#### Cookie设置
- **msToken**: 抖音登录令牌
- **ttwid**: 用户标识
- **odin_tt**: 设备标识
- **passport_csrf_token**: CSRF令牌
- **sid_guard**: 会话保护

## 技术架构

### 后端
- **Flask**: Web框架
- **PyYAML**: 配置文件处理
- **SQLite**: 数据存储（可选）

### 前端
- **Bootstrap 5**: UI框架
- **Bootstrap Icons**: 图标库
- **原生JavaScript**: 交互逻辑

### 数据持久化
- **YAML配置**: 主配置文件
- **自动备份**: 配置修改时自动备份
- **实时同步**: 前后端配置实时同步

## 文件结构

```
├── app.py                 # Flask应用主文件
├── run_web.py            # Web UI启动脚本
├── config.yml            # 配置文件
├── requirements.txt      # 依赖包列表
├── templates/
│   └── index.html       # 主页面模板
├── static/
│   └── app.js          # 前端JavaScript
├── logs/               # 日志目录
└── Downloaded/         # 下载文件目录
```

## 常见问题

### Q: 如何获取抖音Cookie？
A: 
1. 用浏览器登录抖音网页版
2. 按F12打开开发者工具
3. 在Network标签页中找到任意请求
4. 在请求头中找到Cookie字段
5. 复制相关值到设置页面

### Q: 下载失败怎么办？
A:
1. 检查网络连接
2. 确认链接格式正确
3. 尝试配置Cookie
4. 查看日志页面获取详细错误信息

### Q: 如何批量下载？
A:
1. 在首页添加多个链接
2. 配置好下载选项
3. 点击开始下载即可

### Q: 支持哪些链接格式？
A:
- 用户主页: `https://www.douyin.com/user/xxx`
- 视频链接: `https://v.douyin.com/xxx/`
- 合集链接: `https://www.douyin.com/collection/xxx`

## 更新日志

### v1.0.0
- 初始版本发布
- 支持基本的下载功能
- 提供现代化的Web界面
- 支持配置管理和数据持久化

## 许可证

本项目遵循原项目的许可证协议。

## 贡献

欢迎提交Issue和Pull Request来改进这个项目。 