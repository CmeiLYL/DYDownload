# DY下载器 Web UI

这是一个为DY下载器项目开发的现代化Web界面，提供了直观易用的图形化操作界面。

## 主要功能

- **链接管理**: 添加、编辑、删除DY链接
- **下载控制**: 开始、停止、暂停下载任务
- **实时监控**: 实时显示下载进度和状态
- **文件管理**: 浏览、预览、下载已下载的文件
- **配置管理**: 实时修改下载配置和选项
- **日志查看**: 实时查看系统日志和下载日志
- **Cookie配置**: 配置DY登录Cookie信息

## 界面布局

### 首页
- 链接列表管理
- 下载选项配置
- 下载控制面板
- 实时状态显示

### 文件管理页面
- 文件列表浏览
- 分页和筛选功能
- 文件预览功能
- 缩略图显示

### 设置页面
- 下载路径配置
- 线程数设置
- 增量下载选项
- Cookie配置

### 日志页面
- 实时日志显示
- 日志级别筛选
- 日志搜索功能

## 使用指南

### 基本使用流程

1. **启动Web UI**
   - 运行 `python app.py`
   - 访问 `http://localhost:5000`

2. **配置Cookie**
   - 在设置页面中配置DY登录Cookie
   - 确保Cookie有效且未过期

3. **添加下载链接**
   - 输入DY用户主页或视频链接
   - 支持批量添加多个链接

4. **配置下载选项**
   - 选择下载内容类型（视频、音乐、封面等）
   - 设置下载数量限制
   - 配置下载路径

5. **开始下载**
   - 点击"开始下载"按钮
   - 实时监控下载进度
   - 查看下载日志

### 高级功能

#### 文件管理
- 支持多种文件格式预览
- 自动生成视频缩略图
- 文件分类和筛选
- 批量操作功能

#### 配置管理
- 实时配置更新
- 配置备份和恢复
- 多配置文件支持

#### 日志系统
- 详细的日志记录
- 实时日志更新
- 日志级别控制

## 配置说明

### Cookie配置
- **msToken**: DY登录令牌
- **ttwid**: 用户标识
- **odin_tt**: 登录验证
- **passport_csrf_token**: CSRF令牌
- **sid_guard**: 会话保护

### 下载选项
- **音乐**: 下载音频文件
- **封面**: 下载视频封面
- **头像**: 下载用户头像
- **JSON**: 保存元数据
- **文件夹样式**: 按用户分类

### 下载模式
- **发布作品**: 下载用户发布的视频
- **喜欢作品**: 下载用户喜欢的视频
- **合集**: 下载合集内容

## 故障排除

### 常见问题

#### Q: 如何获取DY Cookie？
A: 获取Cookie的步骤：

1. 用浏览器登录DY网页版
2. 打开开发者工具（F12）
3. 在Network标签页中找到任意请求
4. 复制Cookie字段的值

#### Q: 下载失败怎么办？
A: 检查以下几点：

1. Cookie是否有效
2. 网络连接是否正常
3. 下载路径是否有写入权限
4. 查看日志文件获取详细错误信息

#### Q: 文件预览不显示？
A: 可能的原因：

1. 文件格式不支持
2. 文件路径错误
3. 浏览器不支持该格式

## 技术特性

- **响应式设计**: 支持各种屏幕尺寸
- **实时更新**: WebSocket实时状态更新
- **文件预览**: 支持多种格式预览
- **缩略图生成**: 自动生成视频缩略图
- **配置管理**: 实时配置更新
- **日志系统**: 详细的日志记录

## 开发说明

### 文件结构
- `app.py`: 主应用程序
- `ui/templates/`: HTML模板
- `ui/static/`: 静态资源
- `docs/`: 文档文件

### 技术栈
- **后端**: Flask + Python
- **前端**: HTML + CSS + JavaScript
- **数据库**: SQLite
- **文件处理**: PIL + ffmpeg

### 扩展开发
- 添加新的下载选项
- 扩展文件预览功能
- 增加新的配置选项
- 优化用户界面 